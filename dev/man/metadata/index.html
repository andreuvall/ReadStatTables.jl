<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Metadata · ReadStatTables.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://junyuan-chen.github.io/ReadStatTables.jl/stable/man/metadata/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ReadStatTables.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../getting-started/">Getting Started</a></li><li><a class="tocitem" href="../table-interface/">Table Interface</a></li><li class="is-active"><a class="tocitem" href>Metadata</a><ul class="internal"><li><a class="tocitem" href="#File-Level-Metadata"><span>File-Level Metadata</span></a></li><li><a class="tocitem" href="#Variable-Level-Metadata"><span>Variable-Level Metadata</span></a></li><li><a class="tocitem" href="#Metadata-Styles"><span>Metadata Styles</span></a></li></ul></li><li><a class="tocitem" href="../value-labels/">Value Labels</a></li><li><a class="tocitem" href="../date-and-time-values/">Date and Time Values</a></li></ul></li><li><span class="tocitem">About</span><ul><li><a class="tocitem" href="../../license/">License</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Metadata</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Metadata</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/main/docs/src/man/metadata.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Metadata"><a class="docs-heading-anchor" href="#Metadata">Metadata</a><a id="Metadata-1"></a><a class="docs-heading-anchor-permalink" href="#Metadata" title="Permalink"></a></h1><p>File-level metadata associated with a data file are collected in a <a href="#ReadStatTables.ReadStatMeta"><code>ReadStatMeta</code></a>; while variable-level metadata associated with each data column are collected in <a href="#ReadStatTables.ReadStatColMeta"><code>ReadStatColMeta</code></a>s. These metadata objects are stored in a <a href="../table-interface/#ReadStatTables.ReadStatTable"><code>ReadStatTable</code></a> along with the data columns and can be accessed via methods compatible with <a href="https://github.com/JuliaData/DataAPI.jl">DataAPI.jl</a>.</p><h2 id="File-Level-Metadata"><a class="docs-heading-anchor" href="#File-Level-Metadata">File-Level Metadata</a><a id="File-Level-Metadata-1"></a><a class="docs-heading-anchor-permalink" href="#File-Level-Metadata" title="Permalink"></a></h2><p>Each <code>ReadStatTable</code> contains a <code>ReadStatMeta</code> for file-level metadata.</p><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.ReadStatMeta" href="#ReadStatTables.ReadStatMeta"><code>ReadStatTables.ReadStatMeta</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ReadStatMeta &lt;: AbstractMetaDict</code></pre><p>A collection of file-level metadata associated with a data file processed with <code>ReadStat</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/a3cc59be63ffdc6c99f834df79b93ec00a27fecf/src/table.jl#L19-L23">source</a></section></article><p>To retrieve the <code>ReadStatMeta</code> from the <code>ReadStatTable</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metadata(tb)</code><code class="nohighlight hljs ansi" style="display:block;">ReadStatMeta:
  file label     =&gt; A test file
  value labels   =&gt; [&quot;mylabl&quot;, &quot;myord&quot;]
  timestamp      =&gt; 2021-04-22T21:36:00
  file extension =&gt; .dta</code></pre><p>The value associated with a specific metadata key can be retrieved via:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metadata(tb, &quot;filelabel&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;A test file&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; metadata(tb, &quot;filelabel&quot;, style=true)</code><code class="nohighlight hljs ansi" style="display:block;">(&quot;A test file&quot;, :default)</code></pre><p>To obtain a complete list of metadata keys:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metadatakeys(tb)</code><code class="nohighlight hljs ansi" style="display:block;">(&quot;filelabel&quot;, &quot;vallabels&quot;, &quot;timestamp&quot;, &quot;fileext&quot;)</code></pre><p>Metadata contained in a <code>ReadStatMeta</code> can be modified, optionally with a metadata style set at the same time:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metadata!(tb, &quot;filelabel&quot;, &quot;A file label&quot;, style=:note)</code><code class="nohighlight hljs ansi" style="display:block;">ReadStatMeta:
  file label     =&gt; A file label
  value labels   =&gt; [&quot;mylabl&quot;, &quot;myord&quot;]
  timestamp      =&gt; 2021-04-22T21:36:00
  file extension =&gt; .dta</code></pre><p>Since <code>ReadStatMeta</code> has a dictionary-like interface, one can also directly work with it:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; m = metadata(tb)</code><code class="nohighlight hljs ansi" style="display:block;">ReadStatMeta:
  file label     =&gt; A file label
  value labels   =&gt; [&quot;mylabl&quot;, &quot;myord&quot;]
  timestamp      =&gt; 2021-04-22T21:36:00
  file extension =&gt; .dta</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; keys(m)</code><code class="nohighlight hljs ansi" style="display:block;">KeySet for a ReadStatMeta with 4 entries. Keys:
  &quot;filelabel&quot;
  &quot;vallabels&quot;
  &quot;timestamp&quot;
  &quot;fileext&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; m[&quot;filelabel&quot;]</code><code class="nohighlight hljs ansi" style="display:block;">&quot;A file label&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; m[&quot;filelabel&quot;] = &quot;A new file label&quot;</code><code class="nohighlight hljs ansi" style="display:block;">&quot;A new file label&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; copy(m)</code><code class="nohighlight hljs ansi" style="display:block;">Dict{String, Any} with 4 entries:
  &quot;vallabels&quot; =&gt; Dict{String, Dict{Any, String}}(&quot;myord&quot;=&gt;Dict(2=&gt;&quot;medium&quot;, 3=&gt;…
  &quot;fileext&quot;   =&gt; &quot;.dta&quot;
  &quot;filelabel&quot; =&gt; &quot;A new file label&quot;
  &quot;timestamp&quot; =&gt; DateTime(&quot;2021-04-22T21:36:00&quot;)</code></pre><h2 id="Variable-Level-Metadata"><a class="docs-heading-anchor" href="#Variable-Level-Metadata">Variable-Level Metadata</a><a id="Variable-Level-Metadata-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-Level-Metadata" title="Permalink"></a></h2><p>A <code>ReadStatColMeta</code> is associated with each data column for variable-level metadata.</p><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.ReadStatColMeta" href="#ReadStatTables.ReadStatColMeta"><code>ReadStatTables.ReadStatColMeta</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ReadStatColMeta &lt;: AbstractMetaDict</code></pre><p>A collection of variable-level metadata associated with a data column processed with <code>ReadStat</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/a3cc59be63ffdc6c99f834df79b93ec00a27fecf/src/table.jl#L49-L54">source</a></section></article><p>To retrieve the <code>ReadStatColMeta</code> for a specified data column contained in a <code>ReadStatTable</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mylabl)</code><code class="nohighlight hljs ansi" style="display:block;">ReadStatColMeta:
  label         =&gt; labeled
  format        =&gt; %16.0f
  value label   =&gt; mylabl
  measure       =&gt; 0
  alignment     =&gt; 0
  storage width =&gt; 1</code></pre><p>The value associated with a specific metadata key can be retrieved via:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mylabl, &quot;label&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;labeled&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mylabl, &quot;label&quot;, style=true)</code><code class="nohighlight hljs ansi" style="display:block;">(&quot;labeled&quot;, :default)</code></pre><p>To obtain a complete list of metadata keys:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadatakeys(tb, :mylabl)</code><code class="nohighlight hljs ansi" style="display:block;">(&quot;label&quot;, &quot;format&quot;, &quot;vallabel&quot;, &quot;measure&quot;, &quot;alignment&quot;, &quot;storagewidth&quot;)</code></pre><p>Metadata contained in a <code>ReadStatColMeta</code> can be modified, optionally with a metadata style set at the same time:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata!(tb, :mylabl, &quot;label&quot;, &quot;A variable label&quot;, style=:note)</code><code class="nohighlight hljs ansi" style="display:block;">ColMetaIterator{ReadStatColMeta} with 7 entries:
  :mychar =&gt; ReadStatColMeta(character, %-1s)
  :mynum  =&gt; ReadStatColMeta(numeric, %16.2f)
  :mydate =&gt; ReadStatColMeta(date, %td)
  :dtime  =&gt; ReadStatColMeta(datetime, %tc)
  :mylabl =&gt; ReadStatColMeta(A variable label, %16.0f)
  :myord  =&gt; ReadStatColMeta(ordinal, %16.0f)
  :mytime =&gt; ReadStatColMeta(time, %tcHH:MM:SS)</code></pre><p>A <code>ReadStatColMeta</code> also has a dictionary-like interface:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; m = colmetadata(tb, :mylabl)</code><code class="nohighlight hljs ansi" style="display:block;">ReadStatColMeta:
  label         =&gt; A variable label
  format        =&gt; %16.0f
  value label   =&gt; mylabl
  measure       =&gt; 0
  alignment     =&gt; 0
  storage width =&gt; 1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; keys(m)</code><code class="nohighlight hljs ansi" style="display:block;">KeySet for a ReadStatColMeta with 6 entries. Keys:
  &quot;label&quot;
  &quot;format&quot;
  &quot;vallabel&quot;
  &quot;measure&quot;
  &quot;alignment&quot;
  &quot;storagewidth&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; m[&quot;label&quot;]</code><code class="nohighlight hljs ansi" style="display:block;">&quot;A variable label&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; copy(m)</code><code class="nohighlight hljs ansi" style="display:block;">Dict{String, Any} with 6 entries:
  &quot;label&quot;        =&gt; &quot;A variable label&quot;
  &quot;format&quot;       =&gt; &quot;%16.0f&quot;
  &quot;measure&quot;      =&gt; 0
  &quot;storagewidth&quot; =&gt; 0x0000000000000001
  &quot;alignment&quot;    =&gt; 0
  &quot;vallabel&quot;     =&gt; &quot;mylabl&quot;</code></pre><p>However, it can not be modified directly via <code>setindex!</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; m[&quot;label&quot;] = &quot;A new label&quot;</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching setindex!(::ReadStatColMeta, ::String, ::String)
Closest candidates are:
  setindex!(::AbstractDict, ::Any, ::Any, !Matched::Any, !Matched::Any...) at abstractdict.jl:544</code></pre><p>Instead, since the metadata associated with each key are stored consecutively in arrays internally, one may directly access the underlying array for a given metadata key:</p><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.colmetavalues" href="#ReadStatTables.colmetavalues"><code>ReadStatTables.colmetavalues</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">colmetavalues(tb::ReadStatTable, key)</code></pre><p>Return an array of metadata values associated with <code>key</code> for all columns in <code>tb</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/a3cc59be63ffdc6c99f834df79b93ec00a27fecf/src/table.jl#L295-L299">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; v = colmetavalues(tb, &quot;label&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">7-element Vector{String}:
 &quot;character&quot;
 &quot;numeric&quot;
 &quot;date&quot;
 &quot;datetime&quot;
 &quot;A variable label&quot;
 &quot;ordinal&quot;
 &quot;time&quot;</code></pre><p>Notice that changing any value in the array returned above will affect the corresponding <code>ReadStatColMeta</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mychar, &quot;label&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;character&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; v[1] = &quot;char&quot;</code><code class="nohighlight hljs ansi" style="display:block;">&quot;char&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mychar, &quot;label&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;char&quot;</code></pre><h2 id="Metadata-Styles"><a class="docs-heading-anchor" href="#Metadata-Styles">Metadata Styles</a><a id="Metadata-Styles-1"></a><a class="docs-heading-anchor-permalink" href="#Metadata-Styles" title="Permalink"></a></h2><p>Metadata styles provide additional information on how the metadata should be processed in certain scenarios. <code>ReadStatTables.jl</code> does not require such information. However, specifying metadata styles can be useful when the metadata need to be transferred to some other object (e.g., <code>DataFrame</code> from <a href="https://github.com/JuliaData/DataFrames.jl">DataFrames.jl</a>). Packages that implement metadata-related methods compatible with <a href="https://github.com/JuliaData/DataAPI.jl">DataAPI.jl</a> are able to recognize the metadata contained in <code>ReadStatTable</code>.</p><p>By default, all metadata have the <code>:default</code> style. The user-specified metadata styles are recorded in a <code>Dict</code> based on the keys of metadata:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metastyle(tb)</code><code class="nohighlight hljs ansi" style="display:block;">Dict{Symbol, Symbol} with 2 entries:
  :label     =&gt; :note
  :filelabel =&gt; :note</code></pre><p>All metadata associated with keys not listed above are of <code>:default</code> style. To modify the metadata style for those associated with a given key:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metastyle!(tb, &quot;timestamp&quot;, :note)</code><code class="nohighlight hljs ansi" style="display:block;">Dict{Symbol, Symbol} with 3 entries:
  :timestamp =&gt; :note
  :label     =&gt; :note
  :filelabel =&gt; :note</code></pre><p>The same method is also used for variable-specific metadata. However, since the styles are only determined by the metadata keys, metadata associated with the same key always have the same style and hence are not distinguished across different columns.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; metastyle!(tb, &quot;label&quot;, :note)</code><code class="nohighlight hljs ansi" style="display:block;">Dict{Symbol, Symbol} with 3 entries:
  :timestamp =&gt; :note
  :label     =&gt; :note
  :filelabel =&gt; :note</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mychar, &quot;label&quot;, style=true)</code><code class="nohighlight hljs ansi" style="display:block;">(&quot;char&quot;, :note)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; colmetadata(tb, :mynum, &quot;label&quot;, style=true)</code><code class="nohighlight hljs ansi" style="display:block;">(&quot;numeric&quot;, :note)</code></pre><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.metastyle" href="#ReadStatTables.metastyle"><code>ReadStatTables.metastyle</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">metastyle(tb::ReadStatTable, [key::Union{Symbol, AbstractString}])</code></pre><p>Return the specified style(s) of all metadata for table <code>tb</code>. If a metadata <code>key</code> is specified, only the style for the associated metadata are returned. By default, the style for all metadata is <code>:default</code>.</p><p>The style of metadata is only determined by <code>key</code> and hence is not distinguished across different columns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/a3cc59be63ffdc6c99f834df79b93ec00a27fecf/src/table.jl#L190-L199">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.metastyle!" href="#ReadStatTables.metastyle!"><code>ReadStatTables.metastyle!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">metastyle!(tb::ReadStatTable, key::Union{Symbol, AbstractString}, style::Symbol)</code></pre><p>Set the style of all metadata associated with <code>key</code> to <code>style</code> for table <code>tb</code>.</p><p>The style of metadata is only determined by <code>key</code> and hence is not distinguished across different columns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/a3cc59be63ffdc6c99f834df79b93ec00a27fecf/src/table.jl#L204-L211">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../table-interface/">« Table Interface</a><a class="docs-footer-nextpage" href="../value-labels/">Value Labels »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 17 November 2022 19:43">Thursday 17 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
