<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · ReadStatTables.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://junyuan-chen.github.io/ReadStatTables.jl/stable/man/getting-started/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ReadStatTables.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Reading-a-Data-File"><span>Reading a Data File</span></a></li><li><a class="tocitem" href="#Accessing-Individual-Objects"><span>Accessing Individual Objects</span></a></li><li><a class="tocitem" href="#Type-Conversions"><span>Type Conversions</span></a></li><li><a class="tocitem" href="#More-Options"><span>More Options</span></a></li></ul></li><li><a class="tocitem" href="../table-interface/">Table Interface</a></li><li><a class="tocitem" href="../value-labels/">Value Labels</a></li><li><a class="tocitem" href="../date-and-time-values/">Date and Time Values</a></li></ul></li><li><span class="tocitem">About</span><ul><li><a class="tocitem" href="../../license/">License</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/main/docs/src/man/getting-started.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><p>Here is an introduction to the main function of ReadStatTables.jl. For instructions on installation, see <a href="../../#Installation">Installation</a>.</p><h2 id="Reading-a-Data-File"><a class="docs-heading-anchor" href="#Reading-a-Data-File">Reading a Data File</a><a id="Reading-a-Data-File-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-a-Data-File" title="Permalink"></a></h2><p>Suppose we have a Stata <code>.dta</code> file located at <code>data/sample.dta</code>. To read this file into Julia, run</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using ReadStatTables</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; tb = readstat(&quot;data/sample.dta&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">5×7 ReadStatTable:
 Row │ mychar    mynum      mydate                dtime         mylabl         ⋯
     │ String  Float64       Date?            DateTime?  Labeled{Int8}  Labele ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │      a      1.1  2018-05-06  2018-05-06T10:10:10           Male         ⋯
   2 │      b      1.2  1880-05-06  1880-05-06T10:10:10         Female         ⋯
   3 │      c  -1000.3  1960-01-01  1960-01-01T00:00:00           Male         ⋯
   4 │      d     -1.4  1583-01-01  1583-01-01T00:00:00         Female         ⋯
   5 │      e   1000.3     missing              missing           Male         ⋯
                                                               2 columns omitted</code></pre><p>Here is how we read the above result:<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></p><ul><li>Variable names from the data file are displayed in the first row.</li><li>Element type for each variable is displayed below the corresponding variable name.</li><li>The values for each variable are displayed column-wise starting from the third row.</li></ul><p>Some additional details to be noted:</p><ul><li>If a variable contains any missing value, there is a question mark <code>?</code> in the displayed element type.</li><li>By default, all missing values are treated as <a href="https://docs.julialang.org/en/v1/manual/missing/"><code>missing</code></a>, a special value in Julia.</li><li>The date and time values have been translated into <code>Date</code> and <code>DateTime</code> respectively.<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup></li><li>Labels instead of the numeric values are displayed for variables with value labels.</li><li><code>Labeled{Int8}</code> is an abbreviation for <a href="../value-labels/#ReadStatTables.LabeledValue"><code>LabeledValue{Int8}</code></a>.</li></ul><h2 id="Accessing-Individual-Objects"><a class="docs-heading-anchor" href="#Accessing-Individual-Objects">Accessing Individual Objects</a><a id="Accessing-Individual-Objects-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-Individual-Objects" title="Permalink"></a></h2><p>A vector of all variable names can be obtained as follows:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; columnnames(tb)</code><code class="nohighlight hljs ansi" style="display:block;">7-element Vector{Symbol}:
 :mychar
 :mynum
 :mydate
 :dtime
 :mylabl
 :myord
 :mytime</code></pre><p>To retrieve the array containing data for a specific variable:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; tb.mylabl</code><code class="nohighlight hljs ansi" style="display:block;">5-element LabeledVector{Int8, LabeledValue{Int8}}:
 1 =&gt; Male
 2 =&gt; Female
 1 =&gt; Male
 2 =&gt; Female
 1 =&gt; Male</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The returned array is exactly the same array holding the data for the table. Therefore, modifying elements in the returned array will also change the data in the table. To avoid such changes, please make a copy of the array first (by calling <a href="https://docs.julialang.org/en/v1/base/base/#Base.copy"><code>copy</code></a>).</p></div></div><p>Some metadata for the data file are also contained in <code>tb</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; getmeta(tb)</code><code class="nohighlight hljs ansi" style="display:block;">ReadStatMeta:
  variable labels:    Dict(:myord =&gt; &quot;ordinal&quot;, :mynum =&gt; &quot;numeric&quot;, :mydate =&gt; &quot;date&quot;, :mychar =&gt; &quot;character&quot;, :dtime =&gt; &quot;datetime&quot;, :mytime =&gt; &quot;time&quot;, :mylabl =&gt; &quot;labeled&quot;)
  variable formats:   Dict(:myord =&gt; &quot;%16.0f&quot;, :mynum =&gt; &quot;%16.2f&quot;, :mydate =&gt; &quot;%td&quot;, :mychar =&gt; &quot;%-1s&quot;, :dtime =&gt; &quot;%tc&quot;, :mytime =&gt; &quot;%tcHH:MM:SS&quot;, :mylabl =&gt; &quot;%16.0f&quot;)
  value label names:  Dict(:myord =&gt; &quot;myord&quot;, :mynum =&gt; &quot;&quot;, :mydate =&gt; &quot;&quot;, :mychar =&gt; &quot;&quot;, :dtime =&gt; &quot;&quot;, :mytime =&gt; &quot;&quot;, :mylabl =&gt; &quot;mylabl&quot;)
  value labels:       Dict{String, Dict{Any, String}}(&quot;myord&quot; =&gt; Dict(2 =&gt; &quot;medium&quot;, 3 =&gt; &quot;high&quot;, 1 =&gt; &quot;low&quot;), &quot;mylabl&quot; =&gt; Dict(2 =&gt; &quot;Female&quot;, 1 =&gt; &quot;Male&quot;))
  file label:         A test file
  file timestamp:     2021-04-22T21:36:00
  file extension:     .dta</code></pre><p>See <a href="../table-interface/#Table-Interface">Table Interface</a> for more complete reference.</p><h2 id="Type-Conversions"><a class="docs-heading-anchor" href="#Type-Conversions">Type Conversions</a><a id="Type-Conversions-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Conversions" title="Permalink"></a></h2><p>The types provided by ReadStatTables.jl should be sufficient for basic tasks. In case more complicated operations are needed, it is easy to convert the objects into other types.</p><h3 id="Converting-ReadStatTable"><a class="docs-heading-anchor" href="#Converting-ReadStatTable">Converting ReadStatTable</a><a id="Converting-ReadStatTable-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-ReadStatTable" title="Permalink"></a></h3><p>The table returned by <code>readstat</code> is a <code>ReadStatTable</code>. Converting the table into another table type is easy as long as the table type can be constructed with an input following the <a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a> interface.</p><p>For example, to convert the table into a <code>DataFrame</code> from <a href="https://github.com/JuliaData/DataFrames.jl">DataFrames.jl</a>, we run</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using DataFrames</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; df = DataFrame(tb)</code><code class="nohighlight hljs ansi" style="display:block;">5×7 DataFrame
 Row │ mychar  mynum    mydate      dtime                mylabl     myord      ⋯
     │ String  Float64  Date?       DateTime?            LabeledV…  LabeledV…  ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ a           1.1  2018-05-06  2018-05-06T10:10:10  Male       low        ⋯
   2 │ b           1.2  1880-05-06  1880-05-06T10:10:10  Female     medium
   3 │ c       -1000.3  1960-01-01  1960-01-01T00:00:00  Male       high
   4 │ d          -1.4  1583-01-01  1583-01-01T00:00:00  Female     low
   5 │ e        1000.3  missing     missing              Male       missing    ⋯
                                                                1 column omitted</code></pre><h3 id="Converting-LabeledArray"><a class="docs-heading-anchor" href="#Converting-LabeledArray">Converting LabeledArray</a><a id="Converting-LabeledArray-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-LabeledArray" title="Permalink"></a></h3><p>Variables with value labels are stored in <code>LabeledArray</code>s. To convert a <code>LabeledArray</code> into another array type, we need to determine whether we should keep the values or the labels. If only the labels contain the relevant information, we can make use of the <code>labels</code> function which returns an iterator for the labels. For example, to convert a <code>LabeledArray</code> to a <code>CategoricalArray</code> from <a href="https://github.com/JuliaData/CategoricalArrays.jl">CategoricalArrays.jl</a>, we run</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using CategoricalArrays</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; CategoricalArray(labels(tb.mylabl))</code><code class="nohighlight hljs ansi" style="display:block;">5-element CategoricalArray{String,1,UInt32}:
 &quot;Male&quot;
 &quot;Female&quot;
 &quot;Male&quot;
 &quot;Female&quot;
 &quot;Male&quot;</code></pre><p>Sometimes, the values have special meanings while the labels are not so important. To obtain an array of the values without the labels, we can call <code>refarray</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; refarray(tb.mylabl)</code><code class="nohighlight hljs ansi" style="display:block;">5-element Vector{Int8}:
 1
 2
 1
 2
 1</code></pre><p>Alternatively, for a specific element type in the output array, we can call <code>convert</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; convert(Vector{Int}, tb.mylabl)</code><code class="nohighlight hljs ansi" style="display:block;">5-element Vector{Int64}:
 1
 2
 1
 2
 1</code></pre><p>In the last example, the element type of the output array has become <code>Int</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The array returned by <code>refarray</code> (and by <code>convert</code> if element type is not converted) is exactly the same array underlying the <code>LabeledArray</code>. Therefore, modifying the elements of the array will also modify the values in the original <code>LabeledArray</code>.</p></div></div><h2 id="More-Options"><a class="docs-heading-anchor" href="#More-Options">More Options</a><a id="More-Options-1"></a><a class="docs-heading-anchor-permalink" href="#More-Options" title="Permalink"></a></h2><p>The behavior of <code>readstat</code> can be adjusted by passing keyword arguments.</p><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.readstat" href="#ReadStatTables.readstat"><code>ReadStatTables.readstat</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">readstat(filepath::AbstractString; kwargs...)</code></pre><p>Return a <a href="../table-interface/#ReadStatTables.ReadStatTable"><code>ReadStatTable</code></a> that collects data from a supported data file located at <code>filepath</code>.</p><p><strong>Accepted File Extensions</strong></p><ul><li>Stata: <code>.dta</code>.</li><li>SAS: <code>.sas7bdat</code> and <code>.xpt</code>.</li><li>SPSS: <code>.sav</code> and <code>por</code>.</li></ul><p><strong>Keywords</strong></p><ul><li><code>usecols::Union{ColumnSelector, Nothing} = nothing</code>: only keep data from the specified columns (variables); keep all columns if <code>usecols=nothing</code>.</li><li><code>convert_datetime::Union{Bool, ColumnSelector} = true</code>: convert data from the specified columns to <code>Date</code> or <code>DateTime</code> if they are recorded in supported time formats; if specified as <code>true</code> (<code>false</code>), always (never) convert the data whenever possible.</li><li><code>apply_value_labels::Union{Bool, ColumnSelector} = true</code>: convert data from the specified columns to <a href="../value-labels/#ReadStatTables.LabeledArray"><code>LabeledArray</code></a> with their value labels; if specified as <code>true</code> (<code>false</code>), always (never) convert the data whenever possible.</li><li><code>missingvalue = missing</code>: value used to fill any missing value (should be <code>missing</code> unless in special circumstances).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/6b93b771d1cba2fb0640bd12ac6479d5d5ceac55/src/readstat.jl#L90-L106">source</a></section></article><p>The values used to specify certain variables (columns) must be either a <code>ColumnIndex</code> or a vector of <code>ColumnIndex</code>s.</p><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.ColumnIndex" href="#ReadStatTables.ColumnIndex"><code>ReadStatTables.ColumnIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ColumnIndex</code></pre><p>A type union for values accepted by <a href="#ReadStatTables.readstat"><code>readstat</code></a> for selecting a column. A column can be selected either with the column name as <code>Symbol</code> or <code>String</code>; or with an integer index based on the position in a table. See also <a href="#ReadStatTables.ColumnSelector"><code>ColumnSelector</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/6b93b771d1cba2fb0640bd12ac6479d5d5ceac55/src/readstat.jl#L9-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ReadStatTables.ColumnSelector" href="#ReadStatTables.ColumnSelector"><code>ReadStatTables.ColumnSelector</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ColumnSelector</code></pre><p>A type union for values accepted by <a href="#ReadStatTables.readstat"><code>readstat</code></a> for selecting either a single column or multiple columns. The accepted values must be either a <a href="#ReadStatTables.ColumnIndex"><code>ColumnIndex</code></a> or a vector of <a href="#ReadStatTables.ColumnIndex"><code>ColumnIndex</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/junyuan-chen/ReadStatTables.jl/blob/6b93b771d1cba2fb0640bd12ac6479d5d5ceac55/src/readstat.jl#L19-L26">source</a></section></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>The printed output is generated with <a href="https://github.com/ronisbr/PrettyTables.jl">PrettyTables.jl</a>.</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>The time types <code>Date</code> and <code>DateTime</code> are from the <a href="https://docs.julialang.org/en/v1/stdlib/Dates/">Dates</a> module of Julia.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../table-interface/">Table Interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Sunday 6 November 2022 21:53">Sunday 6 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
